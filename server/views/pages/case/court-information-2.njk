{% extends "layout/citizen-authenticated.njk" %}

{% from "govuk/components/warning-text/macro.njk" import govukWarningText %}
{% from "govuk/components/summary-list/macro.njk" import govukSummaryList %}
{% from "govuk/components/checkboxes/macro.njk" import govukCheckboxes %}
{% from "components/support-box/macro.njk" import supportBox %}
{%- from "moj/components/alert/macro.njk" import mojAlert -%}
{% from "govuk/components/button/macro.njk" import govukButton %}

{% set pageTitle = applicationName + " - Your hearings" %}
{% set mainClasses = "app-container govuk-body" %}
{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

      {% if error %}
        <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
          <h2 class="govuk-error-summary__title" id="error-summary-title">There is a problem</h2>
          <div class="govuk-error-summary__body">
            {{ error }}
          </div>
        </div>
      {% endif %}

      <h1 class="govuk-heading-l govuk-!-margin-bottom-2">Your hearings</h1>

      <p class="govuk-body">
        This page gives you details about your hearing dates, location, your rights &amp; responsibilities at the hearing
        and who to contact with questions.
      </p>

    {% if hearingData %}

      {{ mojAlert({
        variant: "information",
        title: "Confirm attendence",
        dismissible: false,
        html: "You can attend the hearing. Please confirm your attendence"
      }) }}

      {{ govukButton({
        text: "Confirm attendence",
        preventDoubleClick: true
      }) }}

      {# --- Hearing Details Card --- #}

      <div class="govuk-summary-card govuk-!-margin-bottom-6">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">
            Hearing details for {{ selectedUrn }}
            <p class="govuk-body-s">
                See details about your next hearing, when and where it will take place
            </p>
          </h2>
        </div>

        <div class="govuk-summary-card__content">
          {{ govukSummaryList({
            rows: [
              {
                key: { text: "Type of hearing" },
                value: {
                  html: hearingData.hearingType ~ "<br><a class='govuk-link' href=\"#\">More information about this hearing type</a>"
                }
              },
              {
                key: { text: "Date and time" },
                value: { text: hearingData.dateTime }
              },
              {
                key: { text: "Location" },
                value: {
                  html: hearingData.location.courtName ~ "<br>" ~
                        "Courtroom " ~ hearingData.location.courtroom ~ "<br>" ~
                        hearingData.location.addressLines | join('<br>') ~ "<br>" ~
                        hearingData.location.postcode
                }
              }
            ]
          }) }}

        </div>
      </div>

      {# --- Contact Details Card --- #}
      <div class="govuk-summary-card govuk-!-margin-bottom-6">
        <div class="govuk-summary-card__title-wrapper">
          <h2 class="govuk-summary-card__title">Contact details
            <p class="govuk-body-s">
              If you have questions or need to speak to someone, please use these contact details
            </p>
          </h2>
        </div>

        <div class="govuk-summary-card__content">

          <p class="govuk-body">
            <a class="govuk-link" href="#">
              Use the local police force online contact tool
            </a>
          </p>

          {{ govukSummaryList({
            rows: [
              {
                key: { text: "Who to speak to" },
                value: { text: hearingData.contactDetails.contactName }
              },
              {
                key: { text: "Telephone" },
                value: { text: hearingData.contactDetails.telephone }
              },
              {
                key: { text: "Hours" },
                value: { text: hearingData.contactDetails.telephoneHours }
              },
              {
                key: { text: "Email" },
                value: { text: hearingData.contactDetails.email }
              }
            ]
          }) }}

        </div>
      </div>

    {% else %}
      <p>No hearings scheduled for this case.</p>
    {% endif %}

    {{ supportBox() }}

  </div>
  </div>
  <div class="govuk-grid-row">
    <pre><code>{{ caseDetails | dump(2) }}</code></pre>
  </div>
{% endblock %}
